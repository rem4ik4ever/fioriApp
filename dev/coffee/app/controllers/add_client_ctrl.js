// Generated by CoffeeScript 1.6.3
app.controller('addUserCtrl', [
  '$scope', 'clientsService', function(scope, clientsService) {
    var animation, client;
    console.log("add user ctrl");
    animation = false;
    scope.masters = ["Ким Диана", "Дмитрий Ногиев"];
    client = function() {
      return {
        savings: 0,
        discount: 0,
        phone: [
          {
            phonetype: "мобильный",
            number: ""
          }, {
            phonetype: "домашний",
            number: ""
          }
        ],
        masters: []
      };
    };
    scope.client = new client;
    scope.saveClient = function() {
      var response;
      console.log("Saving user:");
      scope.client.reg_date = new Date();
      console.log(scope.client);
      response = clientsService.create(scope.client);
      response.success(function(data) {
        return console.log(data);
      });
      return response.error(function() {
        return console.log("Error");
      });
    };
    scope.setPhone = function(index) {
      if (index === 0) {
        return scope.client.phone[index].number = scope.mobilephone;
      } else {
        return scope.client.phone[index].number = scope.homephone;
      }
    };
    scope.setBirthday = function() {
      return scope.client.birthday = new Date(scope.birthday);
    };
    scope.cleanFields = function() {
      scope.client = new client;
      scope.mobilephone = "";
      scope.homephone = "";
      return console.log(scope.client);
    };
    scope.addMaster = function(master) {
      if (master !== void 0 && master.length > 0) {
        scope.client.masters.push(master);
      }
      return console.log(scope.client.masters);
    };
    scope.removeMaster = function(master) {
      return scope.client.masters.splice(scope.client.masters.indexOf(master), 1);
    };
  }
]);
